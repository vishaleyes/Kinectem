/*! Google Maps - v2.9.07
 * http://premium.wpmudev.org/project/wordpress-google-maps-plugin
 * Copyright (c) 2015; * Licensed GPLv2+ */
jQuery(function(){function e(){var e=parseFloat(jQuery("#agm-latitude").val()),i=parseFloat(jQuery("#agm-longitude").val()),a=jQuery("#agm-gwa-bp_map_editor"),n=jQuery("#agm-gwa-bp_map_editor-map"),o=new window.google.maps.LatLng(e,i),r=parseInt(jQuery(window).height()/3,10);a.length||(jQuery("body").append('<div id="agm-gwa-bp_map_editor" style="display:none"><div id="agm-gwa-bp_map_editor-map" style="width:100%; height:'+r+'px" ></div>'+"</div>"),a=jQuery("#agm-gwa-bp_map_editor"),n=jQuery("#agm-gwa-bp_map_editor-map")),window.tb_show("Edit Location","#TB_inline?width=640&height="+r+"&inlineId=agm-gwa-bp_map_editor");var s=new window.google.maps.Map(n.get(0),{zoom:12,minZoom:1,center:o,mapTypeId:window.google.maps.MapTypeId.ROADMAP}),l=new window.google.maps.Marker({title:"Me",map:s,icon:_agm.root_url+"/img/system/marker.png",draggable:!0,clickable:!1,position:o});return window.google.maps.event.addListener(l,"dragend",function(){var e=l.getPosition();jQuery("#agm-latitude").val(e.lat()),jQuery("#agm-longitude").val(e.lng()),t(e.lat(),e.lng())}),!1}function t(e,t){if(void 0===window.google)return!1;var a=new window.google.maps.Geocoder;a.geocode({latLng:new window.google.maps.LatLng(e,t)},function(e,t){return t!==window.google.maps.GeocoderStatus.OK?!1:(i(e[0].formatted_address),void 0)})}function i(t){var i=jQuery("#agm-gwp-location_root"),a=i.find('label[for="agm-address"]'),n=i.find("#agm-gwp-formatted_address");new window.google.maps.Geocoder,n.length||(a.after('<a href="#change-address" id="agm-gwp-formatted_address" />'),n=i.find("#agm-gwp-formatted_address"),n.unbind("click").bind("click",e)),n.text(t)}function a(e,i){var a=jQuery("#agm-gwp-location_root"),n=a.find('label[for="agm-address"]');jQuery("#agm-latitude").val(e),jQuery("#agm-longitude").val(i),n.hide(),t(e,i)}function n(){var e=parseFloat(jQuery("#agm-latitude").val()),t=parseFloat(jQuery("#agm-longitude").val());if(e&&t)return a(e,t);if(navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){a(e.coords.latitude,e.coords.longitude)}),jQuery.ajaxSetup({beforeSend:function(e,t){if(!t.data.match(/\baction=post_update\b/)&&!t.data.match(/\baction=bpfb_update_activity_contents\b/))return!0;var i=parseFloat(jQuery("#agm-latitude").val()),a=parseFloat(jQuery("#agm-longitude").val()),n=jQuery("#agm-address").val(),o=i&&a?"&agm-latitude="+i+"&agm-longitude="+a:"&agm-address="+encodeURIComponent(n);t.data+=o}}),jQuery("#whats-new-options").length){jQuery("body").append(jQuery("<div id='agm-bp-height_test' />").append(jQuery("#whats-new-options").html()));var i=jQuery("#agm-bp-height_test").height();jQuery("#agm-bp-height_test").remove();var n=window.setInterval(function(){var e=jQuery('#whats-new-options[style*="height"]');return e.length?39>=e.height()?!1:e.height()>i?(window.clearInterval(n),!1):(e.height(i),void 0):!1},500)}}function o(){(jQuery("#_wpnonce_post_update").length||jQuery("#whats-new-post-object").length)&&n()}o()}),jQuery(document).bind("agm_google_maps-user-adding_marker",function(e,t,i,a,n){return void 0===n?!1:"disposition"in n?"activity_marker"!==n.disposition?!1:(t._agm_disposition="activity_type",void 0):!1});