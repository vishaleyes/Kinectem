/*! Google Maps - v2.9.07
 * http://premium.wpmudev.org/project/wordpress-google-maps-plugin
 * Copyright (c) 2015; * Licensed GPLv2+ */
window.AgmMapHandler=null,window._agm=window._agm||{},_agm.initialized=!1,jQuery(function(){function e(){window._agmMapIsLoaded?(jQuery.each(_agmMaps,function(e,t){new window.AgmMapHandler(t.selector,t.data)}),_agm.initialized=!0):window.setTimeout(e,100)}_agm.initialized=!1,window.AgmMapHandler=function(e,i){var a,n,o,r,s,l,d="map_"+Math.floor(Math.random()*(new Date).getTime())+"_preview",c=jQuery(e),u=!1,m=[],p=!1,g=null,h=function(){return jQuery(e+" .agm_mh_directions_container").remove(),!1},_=function(){var e='<div class="agm_mh_directions_container agm_mh_container">';e+='<div style="width:300px"><span style="float:right"><input type="button" class="agm_mh_close_directions" value="'+l10nStrings.close+'" /> </span>'+"<div>"+'<a href="#" class="agm_mh_travel_type"><img src="'+_agm.root_url+'/img/system/car_on.png"></a>'+'<a href="#" class="agm_mh_travel_type"><img src="'+_agm.root_url+'/img/system/bike_off.png"></a>'+'<a href="#" class="agm_mh_travel_type"><img src="'+_agm.root_url+'/img/system/walk_off.png"></a>'+'<a href="#" class="agm_mh_travel_type"><img src="'+_agm.root_url+'/img/system/bus_off.png"></a>'+"</div>"+"</div>"+"<div>"+'<img src="'+_agm.root_url+'/img/system/a.png">'+"&nbsp;"+'<input size="32" type="text" class="agm_waypoint_a" />'+"</div>"+'<div><a href="#" class="agm_mh_swap_direction_waypoints"><img src="'+_agm.root_url+'/img/system/swap.png"></a></div>'+"<div>"+'<img src="'+_agm.root_url+'/img/system/b.png">'+"&nbsp;"+'<input size="32" type="text"  class="agm_waypoint_b" />'+"</div>"+"<div>"+'<input type="button" class="agm_mh_get_directions" value="'+l10nStrings.get_directions+'" />'+"</div>"+'<div class="agm_mh_directions_panel agm_mh_container">'+"</div>",e+="</div>",c.append(e)},f=function(){if("object"!=typeof window.google.maps.panoramio)return!1;if(i.show_panoramio_overlay&&parseInt(i.show_panoramio_overlay,10)){var e=i.panoramio_overlay_tag;u=new window.google.maps.panoramio.PanoramioLayer,e&&u.setTag(e),u.setMap(a)}},y=function(){var t=jQuery(this),i=t.find("img"),a=jQuery(e+" .agm_mh_travel_type img");return a.each(function(){jQuery(this).attr("src",jQuery(this).attr("src").replace(/_on\./,"_off."))}),i.attr("src").match(/car_off\.png/)?s=window.google.maps.DirectionsTravelMode.DRIVING:i.attr("src").match(/bike_off\.png/)?s=window.google.maps.DirectionsTravelMode.BICYCLING:i.attr("src").match(/walk_off\.png/)?s=window.google.maps.DirectionsTravelMode.WALKING:i.attr("src").match(/bus_off\.png/)&&(s=window.google.maps.DirectionsTravelMode.TRANSIT),i.attr("src",i.attr("src").replace(/_off\./,"_on.")),!1},v=function(){jQuery(e+" .agm_mh_directions_container").is(":visible")||_();var t=x(jQuery(this).attr("href")),a=m[t];if(i.defaults&&i.defaults.directions_snapping){var n=new window.google.maps.Geocoder;n.geocode({latLng:a.getPosition()},function(t,i){i===window.google.maps.GeocoderStatus.OK?(jQuery(e+" .agm_waypoint_b").val(t[0].formatted_address),jQuery(document).trigger("agm_google_maps-user-directions-waypoint_populated",[t[0].formatted_address,a,c]),jQuery(document).trigger("agm:dir_waypoint",[t[0].formatted_address,a,c])):window.alert(l10nStrings.geocoding_error)})}else{var o=a.getPosition();jQuery(e+" .agm_waypoint_b").val(o),jQuery(document).trigger("agm_google_maps-user-directions-waypoint_populated",[o,a,c]),jQuery(document).trigger("agm:dir_waypoint",[o,a,c])}return!1},w=function(){var t=jQuery(e+" .agm_waypoint_a").val();return jQuery(e+" .agm_waypoint_a").val(jQuery(e+" .agm_waypoint_b").val()),jQuery(e+" .agm_waypoint_b").val(t),!1},b=function(){var t=jQuery(e+" .agm_waypoint_a").val(),a=jQuery(e+" .agm_waypoint_b").val();if(!t||!a)return window.alert(l10nStrings.missing_waypoint),!1;var r={origin:t,destination:a,unitSystem:i.defaults.units,travelMode:s};return n.setPanel(jQuery(e+" .agm_mh_directions_panel").get(0)),o.route(r,function(e,t){t===window.google.maps.DirectionsStatus.OK?n.setDirections(e):window.alert(l10nStrings.oops_no_directions)}),!1},j=function(){var e=!1;jQuery.each(m,function(t,i){if(!e)return e=i,!0;var n={origin:e.getPosition(),destination:i.getPosition(),travelMode:window.google.maps.DirectionsTravelMode.DRIVING},o=new window.google.maps.DirectionsRenderer({draggable:!0}),r=new window.google.maps.DirectionsService;o.setMap(a),r.route(n,function(e,t){t===window.google.maps.DirectionsStatus.OK&&o.setDirections(e)}),e=i})},k=function(e,t,i,n,o,r){r=void 0===r||isNaN(r)?m.length:r,n=n.match(/^https?:\/\//)?n:_agm.root_url+"/img/"+n;var s="";void 0!==o&&void 0!==o.identifier&&(s="agm-id-"+o.identifier),a.setCenter(t);var l=new window.google.maps.Marker({title:e,map:a,icon:n,draggable:!1,clickable:!0,position:t}),d='<div class="agm_mh_info_content"><div class="agm_mh_info_title">'+e+"</div>"+'<img class="agm_mh_info_icon marker-icon-32" src="'+n+'" />'+'<div class="agm_mh_info_body">'+i+"</div>"+M(r)+T(r,1)+"</div>",c=new window.google.maps.InfoWindow({content:d});window.google.maps.event.addListener(l,"click",function(){l.show_info=!0,jQuery(document).trigger("agm_google_maps-user-marker_click",[r,e,i,l,a]),jQuery(document).trigger("agm:marker_click",[r,e,i,l,a]),l.show_info===!0&&c.open(a,l)}),l._agmBody=i,l._agmInfo=c,l._identifier=s,m[r]=l,p=!0,jQuery(document).trigger("agm_google_maps-user-adding_marker",[l,r,a,o]),jQuery(document).trigger("agm:add_marker",[l,r,a,o]),a._agm_add_marker(l),S()},Q=function(){i.markers&&jQuery.each(i.markers,function(e,t){k(t.title,new window.google.maps.LatLng(t.position[0],t.position[1]),t.body,t.icon,t)})},x=function(e){var t=e.replace(/[^0-9]+/,"");return parseInt(t,10)},I=function(){var e=jQuery(this),t=x(e.attr("href")),n=jQuery.extend([],m);"function"==typeof g&&n.sort(g);var o=n[t];if(a.setCenter(o.getPosition()),parseInt(i.street_view,10)){var r=a.getStreetView();r.setPosition(a.getCenter()),r.setVisible(!0)}return jQuery(document).trigger("agm_google_maps-user-map_centered_to_marker",[o,a]),jQuery(document).trigger("agm:centered",[o,a]),!1},M=function(e){return'<a href="#agm_mh_marker-'+e+'" class="agm_mh_marker_item_directions">'+l10nStrings.directions+"</a>"},T=function(e){return"show_posts"in i&&i.show_posts&&parseInt(i.show_posts,10)?'<div class="agm_post_links_container"><input type="hidden" value="'+e+'" /></div>':""},S=function(){if(!i.show_markers||!parseInt(i.show_markers,10))return!1;if(!p)return!1;var e=(new Date).getTime(),t=10;if(isNaN(i.update_list_timer)&&(i.update_list_at=e+t,i.update_list_timer=window.setTimeout(S,t+1)),i.update_list_at>e)return!1;var a=jQuery.extend([],m);"function"==typeof g&&a.sort(g);var n,o,r,s,l='<ul class="agm_mh_marker_list">';for(n=0;a.length>n;n+=1){if(o=a[n],void 0===o)return!1;s=o.getIcon();try{s=s.url?s.url:s}catch(c){s=o.getIcon()}r='<li style="clear:both" class="'+o._identifier+'">'+'<a href="#agm_mh_marker-'+n+'" class="agm_mh_marker_item">'+'<img src="'+s+'" class="marker-icon-32" />'+'<div class="agm_mh_marker_item_content">'+"<div><b>"+o.getTitle()+"</b></div>"+"<div>"+o._agmBody+"</div>"+"</div>"+"</a>"+M(n)+T(n)+'<div style="clear:both"></div>'+"</li>",l+=r}l+="</ul>",jQuery("#agm_mh_markers_"+d).html(l),p=!1},C=function C(e,t,i){var a,n,o;if(t.length){for(t="agm-id-"+t,a=m.length-1;a>=0;a-=1)if(void 0!==m[a]&&m[a]._identifier===t){m[a].setMap(null),o=a;break}n=new window.google.maps.LatLng(i.position[0],i.position[1]),k(i.title,n,i.body,i.icon,i,o)}},L=function L(e,t){var i;if(t.length)for(t="agm-id-"+t,i=m.length-1;i>=0;i-=1)if(m[i]._identifier===t){m[i].setMap(null),m.splice(i,1),p=!0,S();break}},z=function z(e,t){"function"==typeof e&&void 0===t&&(t=e),"function"==typeof t&&("function"!=typeof g||""+g!=""+t)&&(g=t,p=!0)},E=function(){return"show_posts"in i&&i.show_posts&&parseInt(i.show_posts,10)?(jQuery(e+" .agm_post_links_container").each(function(){var e=jQuery(this),t=e.find("input:hidden").val();if(!t)return!0;var n=i.markers[t];if(!n)return!0;var o=!1;return(o="post_ids"in n&&n.post_ids&&n.post_ids.length?n.post_ids:i.post_ids)?(jQuery.post(_agm.ajax_url,{action:"agm_get_post_titles",post_ids:o},function(i){if(!i.posts)return!0;var n='<div class="agm_associated_posts_list_title">'+l10nStrings.posts+"</div>";n+='<ul class="agm_associated_posts_list_items">';var o="";jQuery.each(i.posts,function(e,t){e>2&&(o='style="display:none;"'),n+="<li "+o+'><a href="'+t.permalink+'">'+t.post_title+"</a></li>"}),n+="</ul>",o&&(n+='<a href="#" class="agm_toggle_hidden_post_links">'+l10nStrings.showAll+"</a>"),e.html(n);var r=m[t],s=jQuery(r._agmInfo.getContent());s.find(".agm_post_links_container").html(n);var l='<div class="agm_mh_info_content">'+s.html()+"</div>";r._agmInfo.setContent(l),jQuery("body").on("click",".agm_toggle_hidden_post_links",function(){var e=jQuery(this).parents(".agm_post_links_container").first();return e.find(".agm_associated_posts_list_items li:hidden").length?(e.find(".agm_associated_posts_list_items li:hidden").show(),jQuery(this).text(l10nStrings.hide)):(e.find(".agm_associated_posts_list_items li:gt(2)").hide(),jQuery(this).text(l10nStrings.showAll)),!1}),jQuery(document).trigger("agm_google_maps-user-post_titles_loaded",[r,i,a]),jQuery(document).trigger("agm:post_titles",[r,i,a])}),void 0):!0}),void 0):!1},P=function(){var u,p,g,_=!1;try{u=parseInt(i.width,10)>0?i.width:i.defaults.width,p=parseInt(i.height,10)>0?i.height:i.defaults.height}catch(x){u=parseInt(i.width,10)>0?i.width:200,p=parseInt(i.height,10)>0?i.height:200}u=(""+u).indexOf("%")?u:parseInt(u,10);try{i.defaults.units="units"in i.defaults?window.google.maps.UnitSystem[i.defaults.units]:window.google.maps.UnitSystem.METRIC}catch(x){i.defaults.units=window.google.maps.UnitSystem.METRIC}if(i.zoom=parseInt(i.zoom,10)?parseInt(i.zoom,10):1,i.map_type=i.map_type?i.map_type:"ROADMAP",i.map_alignment=i.map_alignment||i.defaults.map_alignment,i.image_size=i.image_size||i.defaults.image_size,i.image_limit=i.image_limit||i.defaults.image_limit,i.show_panoramio_overlay="show_panoramio_overlay"in i?i.show_panoramio_overlay:0,i.panoramio_overlay_tag="panoramio_overlay_tag"in i?i.panoramio_overlay_tag:"",i.street_view="street_view"in i?i.street_view:0,c.wrap('<div id="map_'+d+'_alignment_container"></div>'),l=jQuery("#map_"+d+"_alignment_container"),c.html('<div id="'+d+'"></div>'),jQuery("#"+d).width(u).height(parseInt(p,10)),c.width(u),i.show_map&&parseInt(i.show_map,10)||jQuery("#"+d).css({position:"absolute",left:"-120000px"}),a=new window.google.maps.Map(jQuery("#"+d).get(0),{zoom:parseInt(i.zoom,10)?parseInt(i.zoom,10):1,minZoom:1,center:new window.google.maps.LatLng(40.7171,-74.0039),mapTypeId:window.google.maps.MapTypeId[i.map_type]}),n=new window.google.maps.DirectionsRenderer({draggable:!0}),o=new window.google.maps.DirectionsService,n.setMap(a),s=window.google.maps.DirectionsTravelMode.DRIVING,c.append('<div id="agm_mh_footer" class="agm_mh_footer"><div class="agm_mh_container" id="agm_mh_markers_'+d+'">'+"</div>"+"</div>"),Q(),f(),window.setTimeout(function(){E()},20),parseInt(i.street_view,10)){var M=a.getStreetView(),T=null;T=i.street_view_pos?new window.google.maps.LatLng(i.street_view_pos[0],i.street_view_pos[1]):a.getCenter(),M.setPosition(T),i.street_view_pov&&M.setPov({heading:parseInt(i.street_view_pov.heading,10),pitch:parseInt(i.street_view_pov.pitch,10),zoom:parseInt(i.street_view_pov.zoom,10)}),M.setVisible(!0)}i.show_images&&parseInt(i.show_images,10)&&(r=new t(a,c,i.image_limit,i.image_size),c.append(r.createMarkup()));var S=!1;try{i.plot_routes&&(S=!0)}catch(x){}switch(S&&j(),jQuery(document).trigger("agm_google_maps-user-map_initialized",[a,i,m]),jQuery(document).trigger("agm:init",[a,i,m]),jQuery(document).trigger("agm_google_maps-user-map_postprocess_markers",[i,m,k]),jQuery(document).trigger("agm:postprocess_markers",[i,m,k]),jQuery(document).trigger("agm_google_maps-user-sort_function",[a,i,z]),jQuery(document).trigger("agm:sort",[a,i,z]),i.map_alignment){case"right":c.css({"float":"right"});break;case"center":c.css({margin:"0 auto"});break;default:c.css({"float":"left"})}l.append('<div style="clear:both"></div>'),jQuery("body").on("click",e+" .agm_mh_travel_type",y),jQuery("body").on("click",e+" .agm_mh_swap_direction_waypoints",w),jQuery("body").on("click",e+" .agm_mh_close_directions",h),jQuery("body").on("click",e+" .agm_mh_get_directions",b),jQuery("body").on("click",e+" .agm_mh_marker_item",I),jQuery("body").on("click",e+" .agm_mh_marker_item_directions",v),c.on("agm:update_marker",C),c.on("agm:remove_marker",L),c.on("agm:sort_function",z),g=window.setInterval(function(){if(_&&c.is(":visible")){var e=a.getCenter();window.google.maps.event.trigger(a,"resize"),a.setCenter(e),jQuery(document).trigger("agm:after_init",[a,i,m]),window.clearInterval(g)}},300),window.google.maps.event.addListenerOnce(a,"idle",function(){_=!0})};P()};var t=function(e,t,i,a){var n="agm_panoramio_"+Math.floor(Math.random()*(new Date).getTime())+"_container",o=[],r=200,s=function(){var t=e.getBounds();if(!t)return window.setTimeout(s,100);var r="func_"+n+"_image_handler";window[r]=function(e){o=e.photos};var l=document.createElement("script"),d="http://www.panoramio.com/map/get_panoramas.php?set=full&from=0&to="+i+"&miny="+t.getSouthWest().lat()+"&minx="+t.getSouthWest().lng()+"&maxy="+t.getNorthEast().lat()+"&maxx="+t.getNorthEast().lng()+"&size="+a+"&callback="+r;l.type="text/javascript",l.src=d,document.body.appendChild(l)},l=function(){if(window.Galleria&&"function"==typeof window.Galleria)return!0;var e=document.createElement("script"),t=_agm.root_url+"/js/external/galleria/galleria-1.2.2.min.js";e.type="text/javascript",e.src=t,document.body.appendChild(e)},d=function(){if(window.Galleria&&"function"==typeof window.Galleria){if(window.Galleria&&window.Galleria.theme)return!0;var e=document.createElement("script"),t=_agm.root_url+"/js/external/galleria/themes/classic/galleria.classic.min.js";e.type="text/javascript",e.src=t,document.body.appendChild(e),u()}else window.setTimeout(d,300)},c=function(){o.length?d():window.setTimeout(c,1e3)},u=function(){if(window.Galleria&&window.Galleria.theme&&"function"==typeof window.Galleria&&"function"==typeof jQuery("#"+n+" div.agm_panoramio_image_list_container").galleria){p();var e=r?r:200;jQuery("#"+n+" div.agm_panoramio_image_list_container").galleria({width:t.width(),height:e})}else window.setTimeout(u,300)},m=function(){return'<div class="agm_panoramio_container" id="'+n+'">'+"</div>"},p=function(){if(!jQuery("#"+n).length)return!1;var e='<div class="agm_panoramio_image_list_container"><ul class="agm_panoramio_image_list">',t=0;jQuery.each(o,function(i,a){var n=parseInt(a.height,10);r=n>r?n:r,e+='<li><img src="'+a.photo_file_url+'" title="'+a.photo_title+'" />'+"</li>",t+=a.width}),e+="</ul></div>",jQuery("#"+n).html(e)},g=function(){s(),l(),c()};return g(),{createMarkup:m}};e();var i=function i(){var e=function e(e){e.preventDefault(),e.stopPropagation();for(var t,i,a,n=jQuery(this).attr("id")+"-container",o=jQuery("body"),r=jQuery("html"),s=jQuery("#"+n),l=jQuery('<div class="agm-modal-back"></div>').appendTo(o),d=o.css("overflow"),c=r.css("overflow"),u=s.data("width"),m=s.data("height"),p=s.find(".agm_google_maps"),g="#"+p.attr("id"),h=_agmMaps.length-1;h>=0;h--)if(_agmMaps[h].selector===g){a=_agmMaps[h];break}if(s.show(),l.show(),(!(""+u).length||isNaN(u))&&(u=a.data.defaults.width),(!(""+m).length||isNaN(m))&&(m=a.data.defaults.height),(""+u).length&&!isNaN(u)&&(t=-1*(u/2),s.css({width:u,"margin-left":t})),(""+m).length&&!isNaN(m)){if(m=parseInt(m),parseInt(a.data.show_markers)){var _=jQuery("#agm_mh_footer",s),f=2;a.data.markers.length>2&&(f=5>a.data.markers.length?a.data.markers.length:5),_.css({top:m,bottom:0}),m+=68*f}i=-1*(m/2),s.css({height:m,"margin-top":i})}return o.css("overflow","hidden"),r.css("overflow","hidden"),s.one("agm:close",function(){o.css("overflow",d),r.css("overflow",c),s.hide(),l.remove()}),l.click(function(){s.trigger("agm:close")}),!1};jQuery("body").on("click",".agm-map-popup",e)};i()});