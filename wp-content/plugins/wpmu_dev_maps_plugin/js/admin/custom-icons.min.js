/*! Google Maps - v2.9.07
 * http://premium.wpmudev.org/project/wordpress-google-maps-plugin
 * Copyright (c) 2015; * Licensed GPLv2+ */
window.setTimeout(function(){var e=jQuery(window),t=jQuery("table.icons"),n=jQuery(".custom-icon-list"),a=jQuery(".add-custom-icon"),r=jQuery(".add-media-image"),i=jQuery(".custom-icon-url"),o=jQuery(".custom-icon-preview"),l=[],u=function u(){var t,a=n.val();try{l=jQuery.parseJSON(a)}catch(r){}for((null===l||"object"!=typeof l)&&(l=[]),t=0;l.length>t;t+=1)f(l[t]);e.resize()},s=function s(){n.val(JSON.stringify(l))},c=function c(){if(i.val()!==i.data("last")){v(),i.data("last",i.val());var e=i.val();o.attr("src",e)}},d=function d(){b()},p=function p(){var e=i.val();i.val(""),i.data("last",""),v(),m(e)},m=function m(t){var n;if(!t.length)return!1;if(!t.match(/^https?:\/\//))return!1;for(n=0;l.length>n;n+=1)if(t===l[n])return!1;f(t),l.push(t),s(),e.resize()},g=function g(){jQuery("tr.alternate",t).removeClass("alternate"),jQuery("tr:nth-child(even)",t).addClass("alternate")},f=function f(e){var n,a,r,i,o,l=jQuery("<tr></tr>").appendTo(t);o=jQuery('<img style="position: absolute;left:-9999999px;top:-99999999px" />'),n=jQuery('<td style="text-align:center"><img src="" class="marker-icon-32" /></td>'),a=jQuery('<td class="url">'+e+"</td>"),r=jQuery("<td>...</td>"),i=jQuery('<td><button type="button" class="button remove">Remove</button></td></tr>'),n.appendTo(l),a.appendTo(l),r.appendTo(l),i.appendTo(l);var u=function u(){r.text(o.width()+" x "+o.height()),o.remove()};o.load(u).attr("src",e).appendTo(jQuery("body")),jQuery("img",n).attr("src",e),g()},y=function y(){var t,n=jQuery(this),a=n.parents("tr").first(),r=a.find(".url").text();for(t=l.length-1;t>=0;t-=1)if(r===l[t]){l.splice(t,1);break}a.remove(),g(),s(),e.resize()},v=function v(){o.hide(),a.addClass("disabled").prop("disabled",!0),a.text(a.data("disabled"))},b=function b(){o.show(),a.removeClass("disabled").prop("disabled",!1),a.text(a.data("enabled"))},j=function j(){var e=window.wp.media({title:"Choose an image",multiple:!1,library:{type:"image"},button:{text:"Use icon"}});e.on("close",function(){var t=e.state().get("selection").first().toJSON(),n=t.url;m(n)}),e.open()};t.on("click",".remove",y),a.click(p),r.click(j),i.keyup(c),i.change(c),o.load(d),u(),v()},50);