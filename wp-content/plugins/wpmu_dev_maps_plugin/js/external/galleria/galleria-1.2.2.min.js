/*! Google Maps - v2.9.07
 * http://premium.wpmudev.org/project/wordpress-google-maps-plugin
 * Copyright (c) 2015; * Licensed GPLv2+ */
(function(e){var t,i=this,a=i.document,n=e(a),o=!1,s=navigator.userAgent.toLowerCase(),r=i.location.hash.replace(/#\//,""),l=function(){return v.TOUCH?"touchstart":"click"},c=function(){var e=3,i=a.createElement("div"),n=i.getElementsByTagName("i");do i.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->";while(n[0]);return e>4?e:t}(),d=function(){return{html:a.documentElement,body:a.body,head:a.getElementsByTagName("head")[0],title:a.title}},u="data ready thumbnail loadstart loadfinish image play pause progress fullscreen_enter fullscreen_exit idle_enter idle_exit rescale lightbox_open lightbox_close lightbox_image",m=function(){var t=[];return e.each(u.split(" "),function(e,i){t.push(i),/_/.test(i)&&t.push(i.replace(/_/g,""))}),t}(),p=function(t){var i;return"object"!=typeof t?t:(e.each(t,function(a,n){/^[a-z]+_/.test(a)&&(i="",e.each(a.split("_"),function(e,t){i+=e>0?t.substr(0,1).toUpperCase()+t.substr(1):t}),t[i]=n,delete t[a])}),t)},g=function(t){return e.inArray(t,m)>-1?v[t.toUpperCase()]:t},h={trunk:{},add:function(e,t,a,n){if(n=n||!1,this.clear(e),n){var o=t;t=function(){o(),h.add(e,t,a)}}this.trunk[e]=i.setTimeout(t,a)},clear:function(e){var t,a=function(e){i.clearTimeout(this.trunk[e]),delete this.trunk[e]};if(e&&e in this.trunk)a.call(h,e);else if(e===void 0)for(t in this.trunk)this.trunk.hasOwnProperty(t)&&a.call(h,t)}},_=[],f=function(){return{array:function(e){return Array.prototype.slice.call(e)},create:function(e,t){t=t||"div";var i=a.createElement(t);return i.className=e,i},forceStyles:function(t,i){t=e(t),t.attr("style")&&t.data("styles",t.attr("style")).removeAttr("style"),t.css(i)},revertStyles:function(){e.each(f.array(arguments),function(t,i){i=e(i).removeAttr("style"),i.data("styles")&&i.attr("style",i.data("styles")).data("styles",null)})},moveOut:function(e){f.forceStyles(e,{position:"absolute",left:-1e4})},moveIn:function(){f.revertStyles.apply(f,f.array(arguments))},hide:function(t,i,a){t=e(t),t.data("opacity")||t.data("opacity",t.css("opacity"));var n={opacity:0};i?t.stop().animate(n,i,a):t.css(n)},show:function(t,i,a){t=e(t);var n=parseFloat(t.data("opacity"))||1,o={opacity:n};1===n&&t.data("opacity",null),i?t.stop().animate(o,i,a):t.css(o)},addTimer:function(){return h.add.apply(h,f.array(arguments)),this},clearTimer:function(){return h.clear.apply(h,f.array(arguments)),this},wait:function(t){t=e.extend({until:function(){return!1},success:function(){},error:function(){v.raise("Could not complete wait function.")},timeout:3e3},t);var a,n,o=f.timestamp(),s=function(){return n=f.timestamp(),a=n-o,t.until(a)?(t.success(),!1):n>=o+t.timeout?(t.error(),!1):(i.setTimeout(s,2),void 0)};i.setTimeout(s,2)},toggleQuality:function(e,t){7!==c&&8!==c||!e||(t===void 0&&(t="nearest-neighbor"===e.style.msInterpolationMode),e.style.msInterpolationMode=t?"bicubic":"nearest-neighbor")},insertStyleTag:function(e){var t=a.createElement("style");if(d().head.appendChild(t),t.styleSheet)t.styleSheet.cssText=e;else{var i=a.createTextNode(e);t.appendChild(i)}},loadScript:function(t,i){var a=!1,n=e("<script>").attr({src:t,async:!0}).get(0);n.onload=n.onreadystatechange=function(){a||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(a=!0,n.onload=n.onreadystatechange=null,"function"==typeof i&&i.call(this,this))},d().head.appendChild(n)},parseValue:function(e){if("number"==typeof e)return e;if("string"==typeof e){var t=e.match(/\-?\d/g);return t&&t.constructor===Array?parseInt(t.join(""),10):0}return 0},timestamp:function(){return(new Date).getTime()},loadCSS:function(n,s,r){var l,u,m=!1;return e("link[rel=stylesheet]").each(function(){return RegExp(n).test(this.href)?(l=this,!1):void 0}),"function"==typeof s&&(r=s,s=t),r=r||function(){},l?(r.call(l,l),l):(u=a.styleSheets.length,o&&(n+="?"+f.timestamp()),e("#"+s).length?(e("#"+s).attr("href",n),u--,m=!0):(l=e("<link>").attr({rel:"stylesheet",href:n,id:s}).get(0),i.setTimeout(function(){var t=e('link[rel="stylesheet"], style');t.length?t.get(0).parentNode.insertBefore(l,t[0]):d().head.appendChild(l),c?l.attachEvent("onreadystatechange",function(){"complete"===l.readyState&&(m=!0)}):m=!0},10)),"function"==typeof r&&f.wait({until:function(){return m&&a.styleSheets.length>u},success:function(){f.addTimer("css",function(){r.call(l,l)},100)},error:function(){v.raise("Theme CSS could not load")},timeout:1e3}),l)}}}(),y={fade:function(t,i){e(t.next).css("opacity",0).show().animate({opacity:1},t.speed,i),t.prev&&e(t.prev).css("opacity",1).show().animate({opacity:0},t.speed)},flash:function(t,i){e(t.next).css("opacity",0),t.prev?e(t.prev).animate({opacity:0},t.speed/2,function(){e(t.next).animate({opacity:1},t.speed,i)}):e(t.next).animate({opacity:1},t.speed,i)},pulse:function(t,i){t.prev&&e(t.prev).hide(),e(t.next).css("opacity",0).animate({opacity:1},t.speed,i)},slide:function(t,i){var a=e(t.next).parent(),n=this.$("images"),o=this._stageWidth,s=this.getOptions("easing");a.css({left:o*(t.rewind?-1:1)}),n.animate({left:o*(t.rewind?1:-1)},{duration:t.speed,queue:!1,easing:s,complete:function(){n.css("left",0),a.css("left",0),i()}})},fadeslide:function(t,i){var a=0,n=this.getOptions("easing"),o=this.getStageWidth();t.prev&&(a=f.parseValue(e(t.prev).css("left")),e(t.prev).css({opacity:1,left:a}).animate({opacity:0,left:a+o*(t.rewind?1:-1)},{duration:t.speed,queue:!1,easing:n})),a=f.parseValue(e(t.next).css("left")),e(t.next).css({left:a+o*(t.rewind?-1:1),opacity:0}).animate({opacity:1,left:a},{duration:t.speed,complete:i,queue:!1,easing:n})}},v=function(){var a=this;this._theme=t,this._options={},this._playing=!1,this._playtime=5e3,this._active=null,this._queue={length:0},this._data=[],this._dom={},this._thumbnails=[],this._initialized=!1,this._stageWidth=0,this._stageHeight=0,this._target=t,this._id=Math.random();var o="container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description info-author thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter tooltip",s="current total";e.each(o.split(" "),function(e,t){a._dom[t]=f.create("galleria-"+t)}),e.each(s.split(" "),function(e,t){a._dom[t]=f.create("galleria-"+t,"span")});var r=this._keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(e){var t=e.keyCode||e.which;t in r.map&&"function"==typeof r.map[t]&&r.map[t].call(a,e)},attach:function(e){var t,i;for(t in e)e.hasOwnProperty(t)&&(i=t.toUpperCase(),i in r.keys&&(r.map[r.keys[i]]=e[t]));r.bound||(r.bound=!0,n.bind("keydown",r.press))},detach:function(){r.bound=!1,n.unbind("keydown",r.press)}},u=this._controls={0:t,1:t,active:0,swap:function(){u.active=u.active?0:1},getActive:function(){return u[u.active]},getNext:function(){return u[1-u.active]}},m=this._carousel={next:a.$("thumb-nav-right"),prev:a.$("thumb-nav-left"),width:0,current:0,max:0,hooks:[],update:function(){var t=0,i=0,n=[0];e.each(a._thumbnails,function(a,o){o.ready&&(t+=o.outerWidth||e(o.container).outerWidth(!0),n[a+1]=t,i=Math.max(i,o.outerHeight||e(o.container).outerHeight(!0)))}),a.$("thumbnails").css({width:t,height:i}),m.max=t,m.hooks=n,m.width=a.$("thumbnails-list").width(),m.setClasses(),a.$("thumbnails-container").toggleClass("galleria-carousel",t>m.width)},bindControls:function(){var e;m.next.bind(l(),function(t){if(t.preventDefault(),"auto"===a._options.carouselSteps){for(e=m.current;m.hooks.length>e;e++)if(m.hooks[e]-m.hooks[m.current]>m.width){m.set(e-2);break}}else m.set(m.current+a._options.carouselSteps)}),m.prev.bind(l(),function(t){if(t.preventDefault(),"auto"===a._options.carouselSteps)for(e=m.current;e>=0;e--){if(m.hooks[m.current]-m.hooks[e]>m.width){m.set(e+2);break}if(0===e){m.set(0);break}}else m.set(m.current-a._options.carouselSteps)})},set:function(e){for(e=Math.max(e,0);m.hooks[e-1]+m.width>=m.max&&e>=0;)e--;m.current=e,m.animate()},getLast:function(e){return(e||m.current)-1},follow:function(e){if(0===e||e===m.hooks.length-2)return m.set(e),void 0;for(var t=m.current;m.hooks[t]-m.hooks[m.current]<m.width&&m.hooks.length>=t;)t++;m.current>e-1?m.set(e-1):e+2>t&&m.set(e-t+m.current+2)},setClasses:function(){m.prev.toggleClass("disabled",!m.current),m.next.toggleClass("disabled",m.hooks[m.current]+m.width>=m.max)},animate:function(){m.setClasses();var e=-1*m.hooks[m.current];isNaN(e)||a.$("thumbnails").animate({left:e},{duration:a._options.carouselSpeed,easing:a._options.easing,queue:!1})}},p=this._tooltip={initialized:!1,open:!1,init:function(){p.initialized=!0;var e=".galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}";f.insertStyleTag(e),a.$("tooltip").css("opacity",.8),f.hide(a.get("tooltip"))},move:function(e){var t=a.getMousePosition(e).x,i=a.getMousePosition(e).y,n=a.$("tooltip"),o=t,s=i,r=n.outerHeight(!0)+1,l=n.outerWidth(!0),c=r+15,d=a.$("container").width()-l-2,u=a.$("container").height()-r-2;isNaN(o)||isNaN(s)||(o+=10,s-=30,o=Math.max(0,Math.min(d,o)),s=Math.max(0,Math.min(u,s)),c>i&&(s=c),n.css({left:o,top:s}))},bind:function(t,i){p.initialized||p.init();var n=function(t,i){p.define(t,i),e(t).hover(function(){f.clearTimer("switch_tooltip"),a.$("container").unbind("mousemove",p.move).bind("mousemove",p.move).trigger("mousemove"),p.show(t),v.utils.addTimer("tooltip",function(){a.$("tooltip").stop().show(),f.show(a.get("tooltip"),400),p.open=!0},p.open?0:500)},function(){a.$("container").unbind("mousemove",p.move),f.clearTimer("tooltip"),a.$("tooltip").stop(),f.hide(a.get("tooltip"),200,function(){a.$("tooltip").hide(),f.addTimer("switch_tooltip",function(){p.open=!1},1e3)})})};"string"==typeof i?n(t in a._dom?a.get(t):t,i):e.each(t,function(e,t){n(a.get(e),t)})},show:function(t){t=e(t in a._dom?a.get(t):t);var n=t.data("tt"),o=function(e){i.setTimeout(function(e){return function(){p.move(e)}}(e),10),t.unbind("mouseup",o)};n="function"==typeof n?n():n,n&&(a.$("tooltip").html(n.replace(/\s/,"&nbsp;")),t.bind("mouseup",o))},define:function(t,i){if("function"!=typeof i){var n=i;i=function(){return n}}t=e(t in a._dom?a.get(t):t).data("tt",i),p.show(t)}},g=this._fullscreen={scrolled:0,active:!1,enter:function(t){g.active=!0,f.hide(a.getActiveImage()),a.$("container").addClass("fullscreen"),g.scrolled=e(i).scrollTop(),f.forceStyles(a.get("container"),{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1e4});var n={height:"100%",overflow:"hidden",margin:0,padding:0};f.forceStyles(d().html,n),f.forceStyles(d().body,n),a.attachKeyboard({escape:a.exitFullscreen,right:a.next,left:a.prev}),a.rescale(function(){f.addTimer("fullscreen_enter",function(){f.show(a.getActiveImage()),"function"==typeof t&&t.call(a)},100),a.trigger(v.FULLSCREEN_ENTER)}),e(i).resize(function(){g.scale()})},scale:function(){a.rescale()},exit:function(t){g.active=!1,f.hide(a.getActiveImage()),a.$("container").removeClass("fullscreen"),f.revertStyles(a.get("container"),d().html,d().body),i.scrollTo(0,g.scrolled),a.detachKeyboard(),a.rescale(function(){f.addTimer("fullscreen_exit",function(){f.show(a.getActiveImage()),"function"==typeof t&&t.call(a)},50),a.trigger(v.FULLSCREEN_EXIT)}),e(i).unbind("resize",g.scale)}},h=this._idle={trunk:[],bound:!1,add:function(t,i){if(t){h.bound||h.addEvent(),t=e(t);var a,n={};for(a in i)i.hasOwnProperty(a)&&(n[a]=t.css(a));t.data("idle",{from:n,to:i,complete:!0,busy:!1}),h.addTimer(),h.trunk.push(t)}},remove:function(t){t=jQuery(t),e.each(h.trunk,function(e,i){i.length&&!i.not(t).length&&(a._idle.show(t),a._idle.trunk.splice(e,1))}),h.trunk.length||(h.removeEvent(),f.clearTimer("idle"))},addEvent:function(){h.bound=!0,a.$("container").bind("mousemove click",h.showAll)},removeEvent:function(){h.bound=!1,a.$("container").unbind("mousemove click",h.showAll)},addTimer:function(){f.addTimer("idle",function(){a._idle.hide()},a._options.idleTime)},hide:function(){a.trigger(v.IDLE_ENTER),e.each(h.trunk,function(e,t){var i=t.data("idle");i&&(t.data("idle").complete=!1,t.stop().animate(i.to,{duration:a._options.idleSpeed,queue:!1,easing:"swing"}))})},showAll:function(){f.clearTimer("idle"),e.each(a._idle.trunk,function(e,t){a._idle.show(t)})},show:function(t){var i=t.data("idle");i.busy||i.complete||(i.busy=!0,a.trigger(v.IDLE_EXIT),f.clearTimer("idle"),t.stop().animate(i.from,{duration:a._options.idleSpeed/2,queue:!1,easing:"swing",complete:function(){e(this).data("idle").busy=!1,e(this).data("idle").complete=!0}})),h.addTimer()}},_=this._lightbox={width:0,height:0,initialized:!1,active:null,image:null,elems:{},init:function(){if(a.trigger(v.LIGHTBOX_OPEN),!_.initialized){_.initialized=!0;var t="overlay box content shadow title info close prevholder prev nextholder next counter image",i={},n=a._options,o="",s="position:absolute;",r="lightbox-",u={overlay:"position:fixed;display:none;opacity:"+n.overlayOpacity+";filter:alpha(opacity="+100*n.overlayOpacity+");top:0;left:0;width:100%;height:100%;background:"+n.overlayBackground+";z-index:99990",box:"position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991",shadow:s+"background:#000;width:100%;height:100%;",content:s+"background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden",info:s+"bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px",close:s+"top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999",image:s+"top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;",prevholder:s+"width:50%;top:0;bottom:40px;cursor:pointer;",nextholder:s+"width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;",prev:s+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;line-height:40px;text-align:center;color:#000",next:s+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;line-height:40px;text-align:center;color:#000",title:"float:left",counter:"float:right;margin-left:8px;"},m=function(t){return t.hover(function(){e(this).css("color","#bbb")},function(){e(this).css("color","#444")})},p={};8===c&&(u.nextholder+="background:#000;filter:alpha(opacity=0);",u.prevholder+="background:#000;filter:alpha(opacity=0);"),e.each(u,function(e,t){o+=".galleria-"+r+e+"{"+t+"}"}),f.insertStyleTag(o),e.each(t.split(" "),function(e,t){a.addElement("lightbox-"+t),i[t]=_.elems[t]=a.get("lightbox-"+t)}),_.image=new v.Picture,e.each({box:"shadow content close prevholder nextholder",info:"title counter",content:"info image",prevholder:"prev",nextholder:"next"},function(t,i){var a=[];e.each(i.split(" "),function(e,t){a.push(r+t)}),p[r+t]=a}),a.append(p),e(i.image).append(_.image.container),e(d().body).append(i.overlay,i.box),m(e(i.close).bind(l(),_.hide).html("&#215;")),e.each(["Prev","Next"],function(t,a){var n=e(i[a.toLowerCase()]).html(/v/.test(a)?"&#8249;&nbsp;":"&nbsp;&#8250;"),o=e(i[a.toLowerCase()+"holder"]);return o.bind(l(),function(){_["show"+a]()}),8>c?(n.show(),void 0):(o.hover(function(){n.show()},function(){n.stop().fadeOut(200)}),void 0)}),e(i.overlay).bind(l(),_.hide)}},rescale:function(t){var n=Math.min(e(i).width()-40,_.width),o=Math.min(e(i).height()-60,_.height),s=Math.min(n/_.width,o/_.height),r=_.width*s+40,l=_.height*s+60,c={width:r,height:l,marginTop:-1*Math.ceil(l/2),marginLeft:-1*Math.ceil(r/2)};t?e(_.elems.box).css(c):e(_.elems.box).animate(c,a._options.lightboxTransitionSpeed,a._options.easing,function(){var e=_.image,t=a._options.lightboxFadeSpeed;a.trigger({type:v.LIGHTBOX_IMAGE,imageTarget:e.image}),e.show(),f.show(e.image,t),f.show(_.elems.info,t)})},hide:function(){_.image.image=null,e(i).unbind("resize",_.rescale),e(_.elems.box).hide(),f.hide(_.elems.info),f.hide(_.elems.overlay,200,function(){e(this).hide().css("opacity",a._options.overlayOpacity),a.trigger(v.LIGHTBOX_CLOSE)})},showNext:function(){_.show(a.getNext(_.active))},showPrev:function(){_.show(a.getPrev(_.active))},show:function(t){_.active=t="number"==typeof t?t:a.getIndex(),_.initialized||_.init(),e(i).unbind("resize",_.rescale);var n=a.getData(t),o=a.getDataLength();f.hide(_.elems.info),_.image.load(n.image,function(a){_.width=a.original.width,_.height=a.original.height,e(a.image).css({width:"100.5%",height:"100.5%",top:0,zIndex:99998,opacity:0}),_.elems.title.innerHTML=n.title,_.elems.counter.innerHTML=t+1+" / "+o,e(i).resize(_.rescale),_.rescale()}),e(_.elems.overlay).show(),e(_.elems.box).show()}};return this};v.prototype={constructor:v,init:function(i,a){var n=this;return a=p(a),_.push(this),this._original={target:i,options:a,data:null},this._target=this._dom.target=i.nodeName?i:e(i).get(0),this._target?(this._options={autoplay:!1,carousel:!0,carouselFollow:!0,carouselSpeed:400,carouselSteps:"auto",clicknext:!1,dataConfig:function(){return{}},dataSelector:"img",dataSource:this._target,debug:t,easing:"galleria",extend:function(){},height:"auto",idleTime:3e3,idleSpeed:200,imageCrop:!1,imageMargin:0,imagePan:!1,imagePanSmoothness:12,imagePosition:"50%",keepSource:!1,lightboxFadeSpeed:200,lightboxTransition_speed:500,linkSourceTmages:!0,maxScaleRatio:t,minScaleRatio:t,overlayOpacity:.85,overlayBackground:"#0b0b0b",pauseOnInteraction:!0,popupLinks:!1,preload:2,queue:!0,show:0,showInfo:!0,showCounter:!0,showImagenav:!0,thumbCrop:!0,thumbEventType:l(),thumbFit:!0,thumbMargin:0,thumbQuality:"auto",thumbnails:!0,transition:"fade",transitionInitial:t,transitionSpeed:400,width:"auto"},a&&a.debug===!0&&(o=!0),e(this._target).children().hide(),"object"==typeof v.theme?this._init():f.wait({until:function(){return"object"==typeof v.theme},success:function(){n._init.call(n)},error:function(){v.raise("No theme found.",!0)},timeout:5e3}),void 0):(v.raise("Target not found."),void 0)},_init:function(){var a=this;if(this._initialized)return v.raise("Init failed: Gallery instance already initialized."),this;if(this._initialized=!0,!v.theme)return v.raise("Init failed: No theme found."),this;e.extend(!0,this._options,v.theme.defaults,this._original.options),this.bind(v.DATA,function(){this._original.data=this._data,this.get("total").innerHTML=this.getDataLength();var t=this.$("container"),n={width:0,height:0},o=f.create("galleria-image");f.wait({until:function(){e.each(["width","height"],function(e,i){n[i]=a._options[i]&&"number"==typeof a._options[i]?a._options[i]:Math.max(f.parseValue(t.css(i)),f.parseValue(a.$("target").css(i)),t[i](),a.$("target")[i]())});var i=function(){return!0};return a._options.thumbnails&&(a.$("thumbnails").append(o),i=function(){return!!e(o).height()}),i()&&n.width&&n.height>10},success:function(){e(o).remove(),t.width(n.width),t.height(n.height),v.WEBKIT?i.setTimeout(function(){a._run()},1):a._run()},error:function(){v.raise("Width & Height not found.",!0)},timeout:2e3})});var n=!1;return this.bind(v.READY,function(n){return function(){return f.show(this.get("counter")),this._options.carousel&&this._carousel.bindControls(),this._options.autoplay&&(this.pause(),"number"==typeof this._options.autoplay&&(this._playtime=this._options.autoplay),this.trigger(v.PLAY),this._playing=!0),n?("number"==typeof this._options.show&&this.show(this._options.show),void 0):(n=!0,this._options.clicknext&&(e.each(this._data,function(e,t){delete t.link}),this.$("stage").css({cursor:"pointer"}).bind(l(),function(){a.next()})),v.History&&v.History.change(function(e){var n=parseInt(e.value.replace(/\//,""),10);isNaN(n)?i.history.go(-1):a.show(n,t,!0)}),v.theme.init.call(this,this._options),this._options.extend.call(this,this._options),/^[0-9]{1,4}$/.test(r)&&v.History?this.show(r,t,!0):this.show(this._options.show),void 0)}}(n)),this.append({"info-text":["info-title","info-description","info-author"],info:["info-text"],"image-nav":["image-nav-right","image-nav-left"],stage:["images","loader","counter","image-nav"],"thumbnails-list":["thumbnails"],"thumbnails-container":["thumb-nav-left","thumbnails-list","thumb-nav-right"],container:["stage","thumbnails-container","info","tooltip"]}),f.hide(this.$("counter").append(this.get("current")," / ",this.get("total"))),this.setCounter("&#8211;"),f.hide(a.get("tooltip")),e.each(Array(2),function(t){var i=new v.Picture;e(i.container).css({position:"absolute",top:0,left:0}),a.$("images").append(i.container),a._controls[t]=i}),this.$("images").css({position:"relative",top:0,left:0,width:"100%",height:"100%"}),this.$("thumbnails, thumbnails-list").css({overflow:"hidden",position:"relative"}),this.$("image-nav-right, image-nav-left").bind(l(),function(e){a._options.clicknext&&e.stopPropagation(),a._options.pause_on_interaction&&a.pause();var t=/right/.test(this.className)?"next":"prev";a[t]()}),e.each(["info","counter","image-nav"],function(e,t){a._options["show"+t.substr(0,1).toUpperCase()+t.substr(1).replace(/-/,"")]===!1&&f.moveOut(a.get(t.toLowerCase()))}),this.load(),this._options.keep_source||c||(this._target.innerHTML=""),this.$("target").append(this.get("container")),this._options.carousel&&this.bind(v.THUMBNAIL,function(){this.updateCarousel()}),this},_createThumbnails:function(){var t,n,o,s,r,l=this,c=this._options,d=function(){var e=l.$("thumbnails").find(".active");return e.length?e.find("img").attr("src"):!1}(),u="string"==typeof c.thumbnails?c.thumbnails.toLowerCase():null,m=function(e){return a.defaultView&&a.defaultView.getComputedStyle?a.defaultView.getComputedStyle(o.container,null)[e]:r.css(e)},p=function(t,i,a){return function(){e(a).append(t),l.trigger({type:v.THUMBNAIL,thumbTarget:t,index:i})}},g=function(t){c.pauseOnInteraction&&l.pause();var i=e(t.currentTarget).data("index");l.getIndex()!==i&&l.show(i),t.preventDefault()},h=function(t){t.scale({width:t.data.width,height:t.data.height,crop:c.thumbCrop,margin:c.thumbMargin,complete:function(t){var i,a,n=["left","top"],o=["Width","Height"];e.each(o,function(o,s){i=s.toLowerCase(),c.thumbCrop===!0&&c.thumbCrop!==i||!c.thumbFit||(a={},a[i]=t[i],e(t.container).css(a),a={},a[n[o]]=0,e(t.image).css(a)),t["outer"+s]=e(t.container)["outer"+s](!0)}),f.toggleQuality(t.image,c.thumbQuality===!0||"auto"===c.thumbQuality&&t.original.width<3*t.width),l.trigger({type:v.THUMBNAIL,thumbTarget:t.image,index:t.data.order})}})};for(this._thumbnails=[],this.$("thumbnails").empty(),t=0;this._data[t];t++)s=this._data[t],c.thumbnails===!0?(o=new v.Picture(t),n=s.thumb||s.image,this.$("thumbnails").append(o.container),r=e(o.container),o.data={width:f.parseValue(m("width")),height:f.parseValue(m("height")),order:t},c.thumbFit&&c.thumbCrop!==!0?r.css({width:0,height:0}):r.css({width:o.data.width,height:o.data.height}),o.load(n,h),"all"===c.preload&&o.add(s.image)):"empty"===u||"numbers"===u?(o={container:f.create("galleria-image"),image:f.create("img","span"),ready:!0},"numbers"===u&&e(o.image).text(t+1),this.$("thumbnails").append(o.container),i.setTimeout(p(o.image,t,o.container),50+20*t)):o={container:null,image:null},e(o.container).add(c.keepSource&&c.linkSourceImages?s.original:null).data("index",t).bind(c.thumbEventType,g),d===n&&e(o.container).addClass("active"),this._thumbnails.push(o)},_run:function(){var e=this;e._createThumbnails(),f.wait({until:function(){return v.OPERA&&e.$("stage").css("display","inline-block"),e._stageWidth=e.$("stage").width(),e._stageHeight=e.$("stage").height(),e._stageWidth&&e._stageHeight>50},success:function(){e.trigger(v.READY)},error:function(){v.raise("Stage measures not found",!0)}})},load:function(t,i,a){var n=this;return this._data=[],this._thumbnails=[],this.$("thumbnails").empty(),"function"==typeof i&&(a=i,i=null),t=t||this._options.dataSource,i=i||this._options.dataSelector,a=a||this._options.dataConfig,t.constructor===Array?(this.validate(t)?(this._data=t,this._parseData().trigger(v.DATA)):v.raise("Load failed: JSON Array not valid."),this):(e(t).find(i).each(function(t,i){i=e(i);var o={},s=i.parent(),r=s.attr("href");/\.(png|gif|jpg|jpeg)(\?.*)?$/i.test(r)?o.image=r:r&&(o.link=r),n._data.push(e.extend({title:i.attr("title"),thumb:i.attr("src"),image:i.attr("src"),description:i.attr("alt"),link:i.attr("longdesc"),original:i.get(0)},o,a(i)))}),this.getDataLength()?this.trigger(v.DATA):v.raise("Load failed: no data found."),this)},_parseData:function(){var t=this;return e.each(this._data,function(e,i){"thumb"in i==!1&&(t._data[e].thumb=i.image)}),this},splice:function(){return Array.prototype.splice.apply(this._data,f.array(arguments)),this._parseData()._createThumbnails()},push:function(){return Array.prototype.push.apply(this._data,f.array(arguments)),this._parseData()._createThumbnails()},_getActive:function(){return this._controls.getActive()},validate:function(){return!0},bind:function(e,t){return e=g(e),this.$("container").bind(e,this.proxy(t)),this},unbind:function(e){return e=g(e),this.$("container").unbind(e),this},trigger:function(t){return t="object"==typeof t?e.extend(t,{scope:this}):{type:g(t),scope:this},this.$("container").trigger(t),this},addIdleState:function(){return this._idle.add.apply(this._idle,f.array(arguments)),this},removeIdleState:function(){return this._idle.remove.apply(this._idle,f.array(arguments)),this},enterIdleMode:function(){return this._idle.hide(),this},exitIdleMode:function(){return this._idle.showAll(),this},enterFullscreen:function(){return this._fullscreen.enter.apply(this,f.array(arguments)),this},exitFullscreen:function(){return this._fullscreen.exit.apply(this,f.array(arguments)),this},toggleFullscreen:function(){return this._fullscreen[this.isFullscreen()?"exit":"enter"].apply(this,f.array(arguments)),this},bindTooltip:function(){return this._tooltip.bind.apply(this._tooltip,f.array(arguments)),this},defineTooltip:function(){return this._tooltip.define.apply(this._tooltip,f.array(arguments)),this},refreshTooltip:function(){return this._tooltip.show.apply(this._tooltip,f.array(arguments)),this},openLightbox:function(){return this._lightbox.show.apply(this._lightbox,f.array(arguments)),this},closeLightbox:function(){return this._lightbox.hide.apply(this._lightbox,f.array(arguments)),this},getActiveImage:function(){return this._getActive().image||t},getActiveThumb:function(){return this._thumbnails[this._active].image||t},getMousePosition:function(e){return{x:e.pageX-this.$("container").offset().left,y:e.pageY-this.$("container").offset().top}},addPan:function(t){if(this._options.imageCrop!==!1){t=e(t||this.getActiveImage());var i=this,a=t.width()/2,n=t.height()/2,o=parseInt(t.css("left"),10),s=parseInt(t.css("top"),10),r=o||0,l=s||0,d=0,u=0,m=!1,p=f.timestamp(),g=0,h=0,_=function(e,i,a){if(e>0&&(h=Math.round(Math.max(-1*e,Math.min(0,i))),g!==h))if(g=h,8===c)t.parent()["scroll"+a](-1*h);else{var n={};n[a.toLowerCase()]=h,t.css(n)}},y=function(e){50>f.timestamp()-p||(m=!0,a=i.getMousePosition(e).x,n=i.getMousePosition(e).y)},v=function(){m&&(d=t.width()-i._stageWidth,u=t.height()-i._stageHeight,o=-1*a/i._stageWidth*d,s=-1*n/i._stageHeight*u,r+=(o-r)/i._options.imagePanSmoothness,l+=(s-l)/i._options.imagePanSmoothness,_(u,l,"Top"),_(d,r,"Left"))};return 8===c&&(t.parent().scrollTop(-1*l).scrollLeft(-1*r),t.css({top:0,left:0})),this.$("stage").unbind("mousemove",y).bind("mousemove",y),f.addTimer("pan",v,50,!0),this}},proxy:function(e,t){return"function"!=typeof e?function(){}:(t=t||this,function(){return e.apply(t,f.array(arguments))})},removePan:function(){return this.$("stage").unbind("mousemove"),f.clearTimer("pan"),this},addElement:function(){var t=this._dom;return e.each(f.array(arguments),function(e,i){t[i]=f.create("galleria-"+i)}),this},attachKeyboard:function(){return this._keyboard.attach.apply(this._keyboard,f.array(arguments)),this},detachKeyboard:function(){return this._keyboard.detach.apply(this._keyboard,f.array(arguments)),this},appendChild:function(e,t){return this.$(e).append(this.get(t)||t),this},prependChild:function(e,t){return this.$(e).prepend(this.get(t)||t),this},remove:function(){return this.$(f.array(arguments).join(",")).remove(),this},append:function(e){var t,i;for(t in e)if(e.hasOwnProperty(t))if(e[t].constructor===Array)for(i=0;e[t][i];i++)this.appendChild(t,e[t][i]);else this.appendChild(t,e[t]);return this},_scaleImage:function(t,i){return i=e.extend({width:this._stageWidth,height:this._stageHeight,crop:this._options.imageCrop,max:this._options.maxScaleRatio,min:this._options.minScaleRatio,margin:this._options.imageMargin,position:this._options.imagePosition},i),(t||this._controls.getActive()).scale(i),this},updateCarousel:function(){return this._carousel.update(),this},rescale:function(e,i,a){var n=this;"function"==typeof e&&(a=e,e=t);var o=function(){n._stageWidth=e||n.$("stage").width(),n._stageHeight=i||n.$("stage").height(),n._scaleImage(),n._options.carousel&&n.updateCarousel(),n.trigger(v.RESCALE),"function"==typeof a&&a.call(n)};return!v.WEBKIT||e||i?o.call(n):f.addTimer("scale",o,5),this},refreshImage:function(){return this._scaleImage(),this._options.imagePan&&this.addPan(),this},show:function(e,t,i){return e===!1||!this._options.queue&&this._queue.stalled?void 0:(e=Math.max(0,Math.min(parseInt(e,10),this.getDataLength()-1)),t=t!==void 0?!!t:this.getIndex()>e,i=i||!1,!i&&v.History?(v.History.value(""+e),void 0):(this._active=e,Array.prototype.push.call(this._queue,{index:e,rewind:t}),this._queue.stalled||this._show(),this))},_show:function(){var t=this,a=this._queue[0],n=this.getData(a.index);if(n){var o=n.image,s=this._controls.getActive(),r=this._controls.getNext(),c=r.isCached(o),d=this._thumbnails[a.index],u=function(){var o;t._queue.stalled=!1,f.toggleQuality(r.image,t._options.imageQuality),e(s.container).css({zIndex:0,opacity:0}),e(r.container).css({zIndex:1,opacity:1}),t._controls.swap(),t._options.imagePan&&t.addPan(r.image),n.link&&e(r.image).css({cursor:"pointer"}).bind(l(),function(){t._options.popupLinks?o=i.open(n.link,"_blank"):i.location.href=n.link}),Array.prototype.shift.call(t._queue),t._queue.length&&t._show(),t._playCheck(),t.trigger({type:v.IMAGE,index:a.index,imageTarget:r.image,thumbTarget:d.image})};if(this._options.carousel&&this._options.carouselFollow&&this._carousel.follow(a.index),this._options.preload){var m,p,g=this.getNext();try{for(p=this._options.preload;p>0;p--)m=new v.Picture,m.add(t.getData(g).image),g=t.getNext(g)}catch(h){}}f.show(r.container),e(t._thumbnails[a.index].container).addClass("active").siblings(".active").removeClass("active"),t.trigger({type:v.LOADSTART,cached:c,index:a.index,imageTarget:r.image,thumbTarget:d.image}),r.load(o,function(e){t._scaleImage(e,{complete:function(e){f.show(e.container),"image"in s&&f.toggleQuality(s.image,!1),f.toggleQuality(e.image,!1),t._queue.stalled=!0,t.removePan(),t.setInfo(a.index),t.setCounter(a.index),t.trigger({type:v.LOADFINISH,cached:c,index:a.index,imageTarget:e.image,thumbTarget:t._thumbnails[a.index].image});var i=null===s.image&&t._options.transitionInitial?t._options.transition_Initial:t._options.transition;if(i in y==!1)u();else{var n={prev:s.image,next:e.image,rewind:a.rewind,speed:t._options.transitionSpeed||400};y[i].call(t,n,u)}}})})}},getNext:function(e){return e="number"==typeof e?e:this.getIndex(),e===this.getDataLength()-1?0:e+1},getPrev:function(e){return e="number"==typeof e?e:this.getIndex(),0===e?this.getDataLength()-1:e-1},next:function(){return this.getDataLength()>1&&this.show(this.getNext(),!1),this},prev:function(){return this.getDataLength()>1&&this.show(this.getPrev(),!0),this},get:function(e){return e in this._dom?this._dom[e]:null},getData:function(e){return e in this._data?this._data[e]:this._data[this._active]},getDataLength:function(){return this._data.length},getIndex:function(){return"number"==typeof this._active?this._active:!1},getStageHeight:function(){return this._stageHeight},getStageWidth:function(){return this._stageWidth},getOptions:function(e){return e===void 0?this._options:this._options[e]},setOptions:function(t,i){return"object"==typeof t?e.extend(this._options,t):this._options[t]=i,this
},play:function(e){return this._playing=!0,this._playtime=e||this._playtime,this._playCheck(),this.trigger(v.PLAY),this},pause:function(){return this._playing=!1,this.trigger(v.PAUSE),this},playToggle:function(e){return this._playing?this.pause():this.play(e)},isPlaying:function(){return this._playing},isFullscreen:function(){return this._fullscreen.active},_playCheck:function(){var e=this,t=0,i=20,a=f.timestamp(),n="play"+this._id;if(this._playing){f.clearTimer(n);var o=function(){return t=f.timestamp()-a,t>=e._playtime&&e._playing?(f.clearTimer(n),e.next(),void 0):(e._playing&&(e.trigger({type:v.PROGRESS,percent:Math.ceil(100*(t/e._playtime)),seconds:Math.floor(t/1e3),milliseconds:t}),f.addTimer(n,o,i)),void 0)};f.addTimer(n,o,i)}},setIndex:function(e){return this._active=e,this},setCounter:function(e){if("number"==typeof e?e++:e===void 0&&(e=this.getIndex()+1),this.get("current").innerHTML=e,c){var t=this.$("counter"),i=t.css("opacity"),a=t.attr("style");a&&1===parseInt(i,10)?t.attr("style",a.replace(/filter[^\;]+\;/i,"")):this.$("counter").css("opacity",i)}return this},setInfo:function(t){var i=this,a=this.getData(t);return e.each(["title","description","author"],function(e,t){var n=i.$("info-"+t);a[t]?n[a[t].length?"show":"hide"]().html(a[t]):n.empty().hide()}),this},hasInfo:function(e){var t,i="title description".split(" ");for(t=0;i[t];t++)if(this.getData(e)[i[t]])return!0;return!1},jQuery:function(t){var i=this,a=[];e.each(t.split(","),function(t,n){n=e.trim(n),i.get(n)&&a.push(n)});var n=e(i.get(a.shift()));return e.each(a,function(e,t){n=n.add(i.get(t))}),n},$:function(){return this.jQuery.apply(this,f.array(arguments))}},e.each(m,function(e,t){var i=/_/.test(t)?t.replace(/_/g,""):t;v[t.toUpperCase()]="galleria."+i}),e.extend(v,{IE9:9===c,IE8:8===c,IE7:7===c,IE6:6===c,IE:!!c,WEBKIT:/webkit/.test(s),SAFARI:/safari/.test(s),CHROME:/chrome/.test(s),QUIRK:c&&a.compatMode&&"BackCompat"===a.compatMode,MAC:/mac/.test(navigator.platform.toLowerCase()),OPERA:!!i.opera,IPHONE:/iphone/.test(s),IPAD:/ipad/.test(s),ANDROID:/android/.test(s),TOUCH:!!(/iphone/.test(s)||/ipad/.test(s)||/android/.test(s))}),v.addTheme=function(t){t.name||v.raise("No theme name specified"),t.defaults="object"!=typeof t.defaults?{}:p(t.defaults);var i,a=!1;return"string"==typeof t.css?(e("link").each(function(e,n){return i=RegExp(t.css),i.test(n.href)?(a=!0,v.theme=t,!1):void 0}),a||e("script").each(function(e,n){i=RegExp("galleria\\."+t.name.toLowerCase()+"\\."),i.test(n.src)&&(a=n.src.replace(/[^\/]*$/,"")+t.css,f.addTimer("css",function(){f.loadCSS(a,"galleria-theme",function(){v.theme=t})},1))}),a||v.raise("No theme CSS loaded")):v.theme=t,t},v.loadTheme=function(i,a){var n=!1,o=_.length;v.theme=t,f.loadScript(i,function(){n=!0}),f.wait({until:function(){return n},error:function(){v.raise("Theme at "+i+" could not load, check theme path.",!0)},success:function(){if(o){var t=[];e.each(v.get(),function(i,n){var o=e.extend(n._original.options,{data_source:n._data},a);n.$("container").remove();var s=new v;s._id=n._id,s.init(n._original.target,o),t.push(s)}),_=t}},timeout:2e3})},v.get=function(e){return _[e]?_[e]:"number"!=typeof e?_:(v.raise("Gallery index "+e+" not found"),void 0)},v.addTransition=function(e,t){y[e]=t},v.utils=f,v.log=function(){try{i.console.log.apply(i.console,f.array(arguments))}catch(e){try{i.opera.postError.apply(i.opera,arguments)}catch(t){i.alert(f.array(arguments).split(", "))}}},v.raise=function(e,t){if(o||t){var i=t?"Fatal error":"Error";throw Error(i+": "+e)}},v.Picture=function(t){this.id=t||null,this.image=null,this.container=f.create("galleria-image"),e(this.container).css({overflow:"hidden",position:"relative"}),this.original={width:0,height:0},this.ready=!1,this.loaded=!1},v.Picture.prototype={cache:{},add:function(t){var i=0,a=this,n=new Image,o=function(){this.width&&this.height||!(1e3>i)||(i++,e(n).load(o).attr("src",t+"?"+(new Date).getTime())),a.original={height:this.height,width:this.width},a.cache[t]=t,a.loaded=!0};return e(n).css("display","block"),a.cache[t]?(n.src=t,o.call(n),n):(e(n).load(o).attr("src",t),n)},show:function(){f.show(this.image)},hide:function(){f.moveOut(this.image)},clear:function(){this.image=null},isCached:function(e){return!!this.cache[e]},load:function(t,a){var n=this;return e(this.container).empty(!0),this.image=this.add(t),f.hide(this.image),e(this.container).append(this.image),f.wait({until:function(){return n.loaded&&n.image.complete&&n.original.width&&n.image.width},success:function(){i.setTimeout(function(){a.call(n,n)},50)},error:function(){i.setTimeout(function(){a.call(n,n)},50),v.raise("image not loaded in 10 seconds: "+t)},timeout:1e4}),this.container},scale:function(i){if(i=e.extend({width:0,height:0,min:t,max:t,margin:0,complete:function(){},position:"center",crop:!1},i),!this.image)return this.container;var a,n,o=this,s=e(o.container);return f.wait({until:function(){return a=i.width||s.width()||f.parseValue(s.css("width")),n=i.height||s.height()||f.parseValue(s.css("height")),a&&n},success:function(){var t=(a-2*i.margin)/o.original.width,s=(n-2*i.margin)/o.original.height,r={"true":Math.max(t,s),width:t,height:s,"false":Math.min(t,s)},l=r[""+i.crop];i.max&&(l=Math.min(i.max,l)),i.min&&(l=Math.max(i.min,l)),e(o.container).width(a).height(n),e.each(["width","height"],function(t,i){e(o.image)[i](o.image[i]=o[i]=Math.round(o.original[i]*l))});var c={},d={},u=function(t,i,a){var n=0;if(/\%/.test(t)){var s=parseInt(t,10)/100,r=o.image[i]||e(o.image)[i]();n=Math.ceil(-1*r*s+a*s)}else n=f.parseValue(t);return n},m={top:{top:0},left:{left:0},right:{left:"100%"},bottom:{top:"100%"}};e.each(i.position.toLowerCase().split(" "),function(e,t){"center"===t&&(t="50%"),c[e?"top":"left"]=t}),e.each(c,function(t,i){m.hasOwnProperty(i)&&e.extend(d,m[i])}),c=c.top?e.extend(c,d):d,c=e.extend({top:"50%",left:"50%"},c),e(o.image).css({position:"relative",top:u(c.top,"height",n),left:u(c.left,"width",a)}),o.show(),o.ready=!0,i.complete.call(o,o)},error:function(){v.raise("Could not scale image: "+o.image.src)},timeout:1e3}),this}},e.extend(e.easing,{galleria:function(e,t,i,a,n){return 1>(t/=n/2)?a/2*t*t*t*t+i:-a/2*((t-=2)*t*t*t-2)+i},galleriaIn:function(e,t,i,a,n){return a*(t/=n)*t*t*t+i},galleriaOut:function(e,t,i,a,n){return-a*((t=t/n-1)*t*t*t-1)+i}}),e.fn.galleria=function(e){return this.each(function(){var t=new v;t.init(this,e)})},i.Galleria=v})(jQuery);