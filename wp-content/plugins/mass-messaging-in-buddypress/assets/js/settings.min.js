jQuery(document).ready(function($){function e(e,a){var n=e.is(":checked");a?e.data("check",n).prop({checked:!a,disabled:a}):e.prop({checked:e.data("check"),disabled:a})}function a(a){var n=!a.data.feature.is(":checked");e(a.data.a,n),e(a.data.b,n)}function n(){var e=i.find(".ordering");e.each(function(e){c[e].val($(this).data("feature"))})}var t=$("#mass_messaging_in_buddypress_settings"),d=t.find("form"),r=t.find(".nav-tab-wrapper .nav-tab-active").first().html(),i=d.find("table"),s=i.find("tbody").find("tr"),c=[$("#ordering_first"),$("#ordering_second"),$("#ordering_third")];if("Features"===r){var o=[];s.each(function(){var e=$(this).children("th").text();""!==e&&(e=e.toLowerCase(),o.unshift(e))}),$.each(o,function(e,n){var t=s.find("#enable_"+n);if(t.length){var d=s.find("#enable_all_"+n),r=s.find("#enable_show_all_"+n);t.closest("tr").nextAll().andSelf().slice(0,3).wrapAll('<tbody class="ordering" data-feature="'+n+'" />').parent().prependTo(i).find("tr").first().find("th").addClass("handle");var c={feature:t,a:d,b:r};t.on("change",c,a),a({data:c})}}),s.find("#ordering_first, #ordering_second, #ordering_third").closest("tr").css("display","none"),i.sortable({forcePlaceholderSize:!0,handle:".handle",items:".ordering",start:function(e,a){a.placeholder.find("td").height(a.item.height()-30)},update:function(){n()}}),n()}});